{"ast":null,"code":"import _objectSpread from\"C:/Users/PC/Desktop/Game nong trai/tu-tien-text-game/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import\"./styles.css\";import{tuviData}from\"./data/tuvi_full_detailed.ts\";import{linhCanList}from\"./data/linhcan.ts\";import{theChatList}from\"./data/thechat.ts\";import{storyTrucCo}from\"./data/cottruyen/storyTrucCo.ts\";// Hàm random theo trọng số rarity\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getRandomByWeight(list,weights){const expandedList=list.flatMap(item=>Array(weights[item.rarity]||1).fill(item));const rand=Math.floor(Math.random()*expandedList.length);return expandedList[rand];}function App(){var _character$linhCan2,_character$linhCan3,_character$theChat2,_character$theChat3,_tuviData;const[hasCharacter,setHasCharacter]=useState(false);const[character,setCharacter]=useState({name:\"\",gender:\"\",linhCan:null,theChat:null,congPhap:[]});const[tuViLevel,setTuViLevel]=useState(0);const[exp,setExp]=useState(0);const[current,setCurrent]=useState(\"start\");const currentTuVi=tuviData[tuViLevel];const node=storyTrucCo[current];const gainExp=amount=>{var _character$linhCan,_character$theChat,_character$theChat$bo;const next=tuviData[tuViLevel+1];if(!next)return;const linhCanMultiplier=((_character$linhCan=character.linhCan)===null||_character$linhCan===void 0?void 0:_character$linhCan.multiplier)||1;const theChatBonus=((_character$theChat=character.theChat)===null||_character$theChat===void 0?void 0:(_character$theChat$bo=_character$theChat.bonus)===null||_character$theChat$bo===void 0?void 0:_character$theChat$bo.exp)||1;const adjusted=amount*linhCanMultiplier*theChatBonus;const newExp=exp+adjusted;if(newExp>=next.exp){setTuViLevel(tuViLevel+1);setExp(newExp-next.exp);}else{setExp(newExp);}};if(!hasCharacter){return/*#__PURE__*/_jsxs(\"div\",{className:\"game-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"T\\u1EA1o Nh\\xE2n V\\u1EADt\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"T\\xEAn nh\\xE2n v\\u1EADt\",value:character.name,onChange:e=>setCharacter(_objectSpread(_objectSpread({},character),{},{name:e.target.value}))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"gender\",value:\"Nam\",onChange:e=>setCharacter(_objectSpread(_objectSpread({},character),{},{gender:e.target.value}))}),\"Nam\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"gender\",value:\"N\\u1EEF\",onChange:e=>setCharacter(_objectSpread(_objectSpread({},character),{},{gender:e.target.value}))}),\"N\\u1EEF\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(!character.name||!character.gender){alert(\"Nhập đủ thông tin!\");return;}const linhCan=getRandomByWeight(linhCanList,{common:60,uncommon:30,legendary:10});const theChat=getRandomByWeight(theChatList,{common:50,uncommon:30,rare:15,epic:4,legendary:1,unique:1});setCharacter(prev=>_objectSpread(_objectSpread({},prev),{},{linhCan,theChat}));setHasCharacter(true);},children:\"B\\u1EAFt \\u0111\\u1EA7u\"})]});}// if (node?.condition && !node.condition(character)) {\n//   return (\n//     <div className=\"game-container\">\n//       <p>Đoạn truyện không khả dụng với nhân vật này.</p>\n//       <button onClick={() => setCurrent(\"start\")}>Chơi lại</button>\n//     </div>\n//   );\n// }\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"game-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[character.name,\" - \",character.gender]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Linh c\\u0103n: \",(_character$linhCan2=character.linhCan)===null||_character$linhCan2===void 0?void 0:_character$linhCan2.name,\" (\",(_character$linhCan3=character.linhCan)===null||_character$linhCan3===void 0?void 0:_character$linhCan3.desc,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Th\\u1EC3 ch\\u1EA5t: \",(_character$theChat2=character.theChat)===null||_character$theChat2===void 0?void 0:_character$theChat2.name,\" (\",(_character$theChat3=character.theChat)===null||_character$theChat3===void 0?void 0:_character$theChat3.desc,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"C\\u1EA3nh gi\\u1EDBi: \",currentTuVi.name,\" - \",currentTuVi.desc]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Kinh nghi\\u1EC7m: \",Math.floor(exp),\"/\",((_tuviData=tuviData[tuViLevel+1])===null||_tuviData===void 0?void 0:_tuviData.exp)||\"MAX\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"choices\",children:[node===null||node===void 0?void 0:node.choices.map((choice,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCurrent(choice.next);gainExp(10);},children:choice.text},index)),(node===null||node===void 0?void 0:node.choices.length)===0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrent(\"start\"),children:\"Ch\\u01A1i l\\u1EA1i\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","tuviData","linhCanList","theChatList","storyTrucCo","jsx","_jsx","jsxs","_jsxs","getRandomByWeight","list","weights","expandedList","flatMap","item","Array","rarity","fill","rand","Math","floor","random","length","App","_character$linhCan2","_character$linhCan3","_character$theChat2","_character$theChat3","_tuviData","hasCharacter","setHasCharacter","character","setCharacter","name","gender","linhCan","theChat","congPhap","tuViLevel","setTuViLevel","exp","setExp","current","setCurrent","currentTuVi","node","gainExp","amount","_character$linhCan","_character$theChat","_character$theChat$bo","next","linhCanMultiplier","multiplier","theChatBonus","bonus","adjusted","newExp","className","children","placeholder","value","onChange","e","_objectSpread","target","type","onClick","alert","common","uncommon","legendary","rare","epic","unique","prev","desc","choices","map","choice","index","text"],"sources":["C:/Users/PC/Desktop/Game nong trai/tu-tien-text-game/src/App.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./styles.css\";\nimport { tuviData } from \"./data/tuvi_full_detailed.ts\";\nimport { linhCanList } from \"./data/linhcan.ts\";\nimport { theChatList } from \"./data/thechat.ts\";\nimport { storyTrucCo } from \"./data/cottruyen/storyTrucCo.ts\";\n\n// Hàm random theo trọng số rarity\nfunction getRandomByWeight(list, weights) {\n  const expandedList = list.flatMap((item) =>\n    Array(weights[item.rarity] || 1).fill(item)\n  );\n  const rand = Math.floor(Math.random() * expandedList.length);\n  return expandedList[rand];\n}\n\nfunction App() {\n  const [hasCharacter, setHasCharacter] = useState(false);\n  const [character, setCharacter] = useState({\n    name: \"\",\n    gender: \"\",\n    linhCan: null,\n    theChat: null,\n    congPhap: [],\n  });\n\n  const [tuViLevel, setTuViLevel] = useState(0);\n  const [exp, setExp] = useState(0);\n  const [current, setCurrent] = useState(\"start\");\n\n  const currentTuVi = tuviData[tuViLevel];\n  const node = storyTrucCo[current];\n\n  const gainExp = (amount) => {\n    const next = tuviData[tuViLevel + 1];\n    if (!next) return;\n    const linhCanMultiplier = character.linhCan?.multiplier || 1;\n    const theChatBonus = character.theChat?.bonus?.exp || 1;\n    const adjusted = amount * linhCanMultiplier * theChatBonus;\n    const newExp = exp + adjusted;\n    if (newExp >= next.exp) {\n      setTuViLevel(tuViLevel + 1);\n      setExp(newExp - next.exp);\n    } else {\n      setExp(newExp);\n    }\n  };\n\n  if (!hasCharacter) {\n    return (\n      <div className=\"game-container\">\n        <h1>Tạo Nhân Vật</h1>\n        <input\n          placeholder=\"Tên nhân vật\"\n          value={character.name}\n          onChange={(e) =>\n            setCharacter({ ...character, name: e.target.value })\n          }\n        />\n        <div>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"gender\"\n              value=\"Nam\"\n              onChange={(e) =>\n                setCharacter({ ...character, gender: e.target.value })\n              }\n            />\n            Nam\n          </label>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"gender\"\n              value=\"Nữ\"\n              onChange={(e) =>\n                setCharacter({ ...character, gender: e.target.value })\n              }\n            />\n            Nữ\n          </label>\n        </div>\n        <button\n          onClick={() => {\n            if (!character.name || !character.gender) {\n              alert(\"Nhập đủ thông tin!\");\n              return;\n            }\n            const linhCan = getRandomByWeight(linhCanList, {\n              common: 60,\n              uncommon: 30,\n              legendary: 10,\n            });\n            const theChat = getRandomByWeight(theChatList, {\n              common: 50,\n              uncommon: 30,\n              rare: 15,\n              epic: 4,\n              legendary: 1,\n              unique: 1,\n            });\n            setCharacter((prev) => ({\n              ...prev,\n              linhCan,\n              theChat,\n            }));\n            setHasCharacter(true);\n          }}\n        >\n          Bắt đầu\n        </button>\n      </div>\n    );\n  }\n\n  // if (node?.condition && !node.condition(character)) {\n  //   return (\n  //     <div className=\"game-container\">\n  //       <p>Đoạn truyện không khả dụng với nhân vật này.</p>\n  //       <button onClick={() => setCurrent(\"start\")}>Chơi lại</button>\n  //     </div>\n  //   );\n  // }\n\n  return (\n    <div className=\"game-container\">\n      <h1>\n        {character.name} - {character.gender}\n      </h1>\n      <p>\n        Linh căn: {character.linhCan?.name} ({character.linhCan?.desc})\n      </p>\n      <p>\n        Thể chất: {character.theChat?.name} ({character.theChat?.desc})\n      </p>\n      <p>\n        Cảnh giới: {currentTuVi.name} - {currentTuVi.desc}\n      </p>\n      <p>\n        Kinh nghiệm: {Math.floor(exp)}/{tuviData[tuViLevel + 1]?.exp || \"MAX\"}\n      </p>\n\n      {/* <p>{node.text}</p> */}\n      <div className=\"choices\">\n        {node?.choices.map((choice, index) => (\n          <button\n            key={index}\n            onClick={() => {\n              setCurrent(choice.next);\n              gainExp(10);\n            }}\n          >\n            {choice.text}\n          </button>\n        ))}\n        {node?.choices.length === 0 && (\n          <button onClick={() => setCurrent(\"start\")}>Chơi lại</button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}